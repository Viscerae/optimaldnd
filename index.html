<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Inline style for immediate theme application -->
    <style id="theme-styles">
        /* Default light mode styles */
        body {
            background-color: #f0f0f0;
            color: #333;
        }
        header, footer {
            background-color: #333;
        }
        nav {
            background-color: #444;
        }

        /* Dark mode styles */
        .dark-mode body {
            background-color: #181818;
            color: #f0f0f0;
        }
        .dark-mode header, .dark-mode footer {
            background-color: #222;
        }
        .dark-mode nav {
            background-color: #333;
        }
    </style>

    <script>
        (function() {
            const darkTheme = 'dark-mode'; // Class name used for dark theme
            const selectedTheme = localStorage.getItem('selected-theme');
            const themeStyles = document.getElementById('theme-styles');

            if (selectedTheme) {
                document.body.classList[selectedTheme === 'dark' ? 'add' : 'remove'](darkTheme);
                // Update the inline style based on the saved theme
                themeStyles.textContent = selectedTheme === 'dark'
                    ? `.dark-mode body { background-color: #181818; color: #f0f0f0; } .dark-mode header, .dark-mode footer { background-color: #222; } .dark-mode nav { background-color: #333; }`
                    : `body { background-color: #f0f0f0; color: #333; } header, footer { background-color: #333; } nav { background-color: #444; }`;
            }

            // Ensure the toggle reflects the current theme
            document.addEventListener('DOMContentLoaded', function() {
                const toggle = document.getElementById('darkModeToggle');
                if (toggle) {
                    toggle.checked = selectedTheme === 'dark';
                    toggle.addEventListener('change', function() {
                        const isDarkMode = this.checked;
                        document.body.classList.toggle(darkTheme, isDarkMode);
                        localStorage.setItem('selected-theme', isDarkMode ? 'dark' : 'light');

                        // Update inline styles when toggling
                        themeStyles.textContent = isDarkMode
                            ? `.dark-mode body { background-color: #181818; color: #f0f0f0; } .dark-mode header, .dark-mode footer { background-color: #222; } .dark-mode nav { background-color: #333; }`
                            : `body { background-color: #f0f0f0; color: #333; } header, footer { background-color: #333; } nav { background-color: #444; }`;
                    });
                }
            });
        })();
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimal DnD</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <header>
        <h1>Optimal DnD</h1>
        <div class="switch">
            <input type="checkbox" id="darkModeToggle">
            <label for="darkModeToggle" class="slider"></label>
        </div>
    </header>
    <nav>
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="/pages/about.html">About</a></li>
            <li>
                <a href="#">Tools</a>
                <ul>
                    <li><a href="/pages/Tools-for-DMs.html">Tools for DMs</a></li>
                    <li><a href="/pages/Tools-for-Players.html">Tools for Players</a></li>
                    <li><a href="/pages/others.html">Others</a></li>
                </ul>
            </li>
            <li><a href="/pages/contactus.html">Contact</a></li>
        </ul>
    </nav>
    <main>
        <h2>Optimal DnD</h2>
        <p>You can check more info on my <a href="https://github.com/Viscerae/optimaldnd">Github</a>.</p>
    </main>
    <footer>
        <p>&copy; 2024 Optimal DnD Project</p>
    </footer>
    <script src="/js/script.js"></script>
</body>
</html>
