<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimal DnD</title>

    <!-- Critical CSS to avoid flickering -->
    <style id="critical-styles">
        /* Default light mode styles */
        body {
            background-color: #f0f0f0;
            color: #333;
            transition: background-color 0.3s, color 0.3s;
        }
        header, footer {
            background-color: #333;
        }
        nav {
            background-color: #444;
        }

        /* Dark mode styles */
        .dark-mode body {
            background-color: #181818;
            color: #f0f0f0;
        }
        .dark-mode header, .dark-mode footer {
            background-color: #222;
        }
        .dark-mode nav {
            background-color: #333;
        }
    </style>

    <!-- JavaScript to dynamically apply the theme -->
    <script>
        (function() {
            const darkThemeClass = 'dark-mode'; // Class name used for dark theme
            const themeLink = document.createElement('link');
            themeLink.rel = 'stylesheet';
            themeLink.id = 'theme-styles';

            const selectedTheme = localStorage.getItem('selected-theme');
            if (selectedTheme === 'dark') {
                themeLink.href = '/css/styles-dark.css';
                document.body.classList.add(darkThemeClass);
            } else {
                themeLink.href = '/css/styles-light.css';
                document.body.classList.remove(darkThemeClass);
            }

            document.head.appendChild(themeLink);

            // Ensure the toggle reflects the current theme
            document.addEventListener('DOMContentLoaded', function() {
                const toggle = document.getElementById('darkModeToggle');
                if (toggle) {
                    toggle.checked = selectedTheme === 'dark';
                    toggle.addEventListener('change', function() {
                        const isDarkMode = this.checked;
                        if (isDarkMode) {
                            themeLink.href = '/css/styles-dark.css';
                            document.body.classList.add(darkThemeClass);
                            localStorage.setItem('selected-theme', 'dark');
                        } else {
                            themeLink.href = '/css/styles-light.css';
                            document.body.classList.remove(darkThemeClass);
                            localStorage.setItem('selected-theme', 'light');
                        }
                    });
                }
            });
        })();
    </script>
</head>
<body>
    <header>
        <h1>Optimal DnD</h1>
        <div class="switch">
            <input type="checkbox" id="darkModeToggle">
            <label for="darkModeToggle" class="slider"></label>
        </div>
    </header>
    <nav>
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="/pages/about.html">About</a></li>
            <li>
                <a href="#">Tools</a>
                <ul>
                    <li><a href="/pages/Tools-for-DMs.html">Tools for DMs</a></li>
                    <li><a href="/pages/Tools-for-Players.html">Tools for Players</a></li>
                    <li><a href="/pages/others.html">Others</a></li>
                </ul>
            </li>
            <li><a href="/pages/contactus.html">Contact</a></li>
        </ul>
    </nav>
    <main>
        <h2>Optimal DnD</h2>
        <p>You can check more info on my <a href="https://github.com/Viscerae/optimaldnd">Github</a>.</p>
    </main>
    <footer>
        <p>&copy; 2024 Optimal DnD Project</p>
    </footer>
    <script src="/js/script.js"></script>
</body>
</html>
